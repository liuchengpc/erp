<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>调价单</title>

		<link rel="stylesheet" href="css/layui.css">
		<link href="css/fontawesome.css" rel="stylesheet">
		<link href="css/brands.css" rel="stylesheet">
		<link href="css/solid.css" rel="stylesheet">
		<style>
			#app{
            padding: 15px;
			/* !important 设置样式优先级最高
			 * 防止数据加载完毕之前出现vue表达式 */
			
			[v-cloak] {
				display: none !important;
			}
        }
    </style>
	</head>
	<body>
		<div id="app">
			<div class="layui-form" v-for="pages,index in page.list">
				<div class="layui-row">
					<div class="layui-col-lg6">
						<div class="layui-form">
							<div class="layui-form-item">
								<label class="layui-form-label" style="color:#009688;">单据日期</label>
								<div class="layui-input-block">
									<input type="text" class="layui-input" v-model="pages.apCustom1">
								</div>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label" style="color:#009688;">单据号码</label>
								<div class="layui-input-block">
									<input type="text" name="apDateid" class="layui-input" v-model="pages.apDateid">
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="layui-row">
					<div class="layui-col-lg6">
						<div class="layui-form">
							<div class="layui-form-item">
								<label class="layui-form-label">增值科目</label>
								<div class="layui-input-block">
									<input type="text" class="layui-input" v-model="pages.upName">
								</div>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">减值科目</label>
								<div class="layui-input-block">
									<input type="text" class="layui-input" v-model="pages.upCustom6">
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="layui-row">
					<div class="layui-tab">
						<ul class="layui-tab-title">
							<li class="layui-this">内容</li>
							<li>备注</li>
						</ul>
						<div class="layui-tab-content" style="padding: 10px 0;">
							<div class="layui-tab-item layui-show">
								<table id="materialsContent" class="layui-hide">

								</table>
							</div>
							<div class="layui-tab-item">
								<div class="layui-row">
									<div class="layui-col-lg6">
										<div class="layui-form">
											<div class="layui-form-item">
												<label class="layui-form-label">自定栏一</label>
												<div class="layui-input-block">
													<input type="text" name="title" class="layui-input">
												</div>
											</div>
											<div class="layui-form-item">
												<label class="layui-form-label">自定栏二</label>
												<div class="layui-input-block">
													<input type="text" name="title" class="layui-input">
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="layui-row">
									<div class="layui-col-lg12">
										<div class="layui-form">
											<div class="layui-form-item">
												<label class="layui-form-label">备注</label>
												<div class="layui-input-block">
													<textarea class="layui-textarea"></textarea>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="layui-row">
					<div class="layui-col-lg6">
						<div class="layui-form">
							<div class="layui-form-item">
								<label class="layui-form-label" style="color:#009688;">业务人员</label>
								<div class="layui-input-block">
									<input type="text" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label" style="color:#009688;">所属部门</label>
								<div class="layui-input-block">
									<input type="text" class="layui-input">
								</div>
							</div>
						</div>
					</div>
					<div class="layui-col-lg6">
						<div class="layui-form">
							<div class="layui-form-item">
								<label class="layui-form-label">制单人员</label>
								<div class="layui-input-block">
									<input type="text" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">复核人员</label>
								<div class="layui-input-block">
									<input type="text" class="layui-input">
								</div>
							</div>
						</div>
					</div>
				</div>
				
			<div class="layui-form-item">
					<div class="layui-input-block">
						<button class="layui-btn" title="第一笔" @click="goFirstPage"><i class="fa fa-angle-double-left fa-lg" aria-hidden="true"></i></button>
						<button class="layui-btn" title="上一笔" @click="goPrePage"><i class="fa fa-angle-left fa-lg" aria-hidden="true"></i></button>
						<button class="layui-btn" title="下一笔" @click="goNextPage"><i class="fa fa-angle-right fa-lg" aria-hidden="true"></i></button>
						<button class="layui-btn" title="后一笔" @click="goLastPage"><i class="fa fa-angle-double-right fa-lg" aria-hidden="true"></i></button>
						<button class="layui-btn" title="新增"><i class="fa fa-file fa-lg" aria-hidden="true"></i></button>
						<button class="layui-btn" title="保存"><i class="fa fa-floppy-o fa-lg" aria-hidden="true"></i></button>
						<button class="layui-btn" title="编辑"><i class="fa fa-pencil-square-o fa-lg"></i></button>
						<button class="layui-btn" title="删除"><i class="fa fa-trash fa-lg" aria-hidden="true"></i></button>
						<button class="layui-btn" title="重置" type="reset"><i class="fa fa-rotate-left fa-lg" aria-hidden="true"></i></button>
						<button class="layui-btn" title="刷新"><i class="fa fa-refresh fa-lg" aria-hidden="true"></i></button>
						<button class="layui-btn" title="审核"><i class="fa fa-check fa-lg" aria-hidden="true"></i></button>
						<button class="layui-btn" title="取消审核"><i class="fa fa-close fa-lg" aria-hidden="true"></i></button>
					</div>
				</div>
			</div>
			</div>
		</div>
		<script src="jquery-1.12.4.js"></script>
		<script src="layui.js"></script>
		<script src="js/vue.js"></script>
		<script type="text/html" id="indexs">
		 {{d.Lay_Table_INDEX+1}}
		</script>
		<script>
			/*layui.use('layer', function(){
        var layer = layui.layer;
        layer.open({
            type: 1,
            title: '销售报价单',
            content: $('#app'),
            area: ['800px', '650px']
        });
    });*/
			var host="http://127.0.0.1:8080/";
    		//单号
   			var matterCustom6=$("[name=apDateid").val();
			alert(matterCustom6);
			//创建vue实例
			var receiptvue=new Vue({
				el:"#app",
				data(){
					return{
						page:[],
						list:[]
					}
				},
				methods: {
					goPage: function(page){
						alert("进入gopage");
						var this_ = this;
						$.ajax({
								url : host+"wd_adjustController/selectAllpage",
								type: "get",
								data: "pageNum="+page+"&pageSize=1",
								success:function(res){
									this_.page = res;
									console.info(this_.page);
								}
							});
					},
					//查询相对应单号下的物料信息
					queryMater:function(matterCustom6){
						url:"http://127.0.0.1:8080/wd_adjustController/queryMater",
						data:{matterCustom6 : matterCustom6},
						dataType:"json",
						success:function(result){
							this_.list = result;
							console.info(this_.list);
						}
					}
					
				goFirstPage: function() { //第一条
					alert("显示第一条")
					this.goPage(1);
				},
				goLastPage: function() { //最后一条
					alert("显示最后一条")
					this.goPage(this.page.pages);
				},
				goPrePage: function() { //上一条
					if (this.page.hasPreviousPage) {
						this.goPage(this.page.prePage);
					}
				},
				goNextPage: function() { //下一条
					if (this.page.hasNextPage) {
						this.goPage(this.page.nextPage);
					}
				}, 
					
				},
				created:function(){
					this.goPage(1);
					this.queryMater(matterCustom6);
				}
			});
			layui.use('element', function() {
				var $ = layui.jquery,
					element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块

				//触发事件
				var active = {
					tabAdd: function() {
						//新增一个Tab项
						element.tabAdd('demo', {
							title: '新选项' + (Math.random() * 1000 | 0) //用于演示
								,
							content: '内容' + (Math.random() * 1000 | 0),
							id: new Date().getTime() //实际使用一般是规定好的id，这里以时间戳模拟下
						})
					},
					tabDelete: function(othis) {
						//删除指定Tab项
						element.tabDelete('demo', '44'); //删除：“商品管理”


						othis.addClass('layui-btn-disabled');
					},
					tabChange: function() {
						//切换到指定Tab项
						element.tabChange('demo', '22'); //切换到：用户管理
					}
				};

				$('.site-demo-active').on('click', function() {
					var othis = $(this),
						type = othis.data('type');
					active[type] ? active[type].call(this, othis) : '';
				});

				//Hash地址的定位
				var layid = location.hash.replace(/^#test=/, '');
				element.tabChange('test', layid);

				element.on('tab(test)', function(elem) {
					location.hash = 'test=' + $(this).attr('lay-id');
				});
			});

			layui.use('table', function() {
				/* var matterCustom6=$("[name=apDateid").val();
				alert(matterCustom6); */
				var table = layui.table;
				table.render({
					elem: '#materialsContent',
					data:res.list[0].list,
					/* url: 'http://127.0.0.1:8080/wd_adjustController/queryMater?matterCustom6='+matterCustom6,
					 */
					 cellMinWidth: 80 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
						,cols: [[
							{templet:"#indexs",title: '(栏号)',sort: true}, 
							{field: 'materialid',title: '物料编号'}, 
							{field: 'matterName',title: '(物料名称)',sort: true}, 
							{field: 'matterSize',title: '(规格型号)'}, 
							{field: 'muName',title: '(单位)',sort: true}, 
							{field: 'matterNowcount',title: '(库存量)',sort: true}, 
							{field: 'matterNowavgcost',title: '(平均成本)',sort: true}, 
							{field: 'onePrice',title: '(单价)',sort: true}, 
							{field: 'apPrice',title: '(调价金额)',sort: true}, 
							{field: 'apDecoration',title: '分录备注',sort: true}
							]]
				});
			});
		</script>
	</body>
</html>
